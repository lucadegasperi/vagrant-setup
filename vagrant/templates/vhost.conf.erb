# File Managed by Puppet

server {
  listen <%= @port %>; 
  root  <%= @docroot %>;
  server_name <%= @name %> <%= @serveraliases %>;

  access_log  <%= scope.lookupvar('nginx::log_dir')%>/<%= @name %>.access.log;
  error_log  <%= scope.lookupvar('nginx::log_dir')%>/<%= @name %>.error.log;

  index index.php;

  location / {
    index       index.html index.htm index.php;
    try_files   $uri $uri/ /index.php?$query_string;
  }

  location ~ \.php$ {
    fastcgi_pass   localhost:9000;
    fastcgi_index  index.php;
    fastcgi_param  SCRIPT_FILENAME $document_root$fastcgi_script_name;
    include        fastcgi_params;
  }

}